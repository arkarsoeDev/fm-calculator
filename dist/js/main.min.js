const themes=document.querySelectorAll(".theme-toggle"),themeControl=document.querySelector(".theme"),themeTitle=document.querySelector(".theme-title");let currentTheme="theme1";function attachTheme(e){themeControl.classList=`theme ${e}`}themes.forEach((e=>{e.addEventListener("click",(e=>{currentTheme=e.currentTarget.value,attachTheme(currentTheme)}))})),themeTitle.addEventListener("click",(()=>{let e=+currentTheme[currentTheme.length-1];e++,e<0&&(e=3),e>3&&(e=1),currentTheme="theme"+e,document.querySelector(`#${currentTheme}`).click()}));const keys=document.querySelectorAll(".number"),calcs=document.querySelectorAll(".calc"),del=document.querySelector(".key-button__del"),reset=document.querySelector(".key-button__reset"),equal=document.querySelector(".key-button__equal"),input=document.querySelector(".screen");let currentInput="",currentNum,numArr,calcNo=0,lastKey;function xFinder(e){if(e.indexOf("x"))return e.replace("x","*")}function numberWithCommas(e){return e.replace(/\B(?=(\d{3})+(?!\d))/g,",")}function removeZero(e){let t=[],n=e.split(/[\s]/);return n.map((e=>{isNaN(e)||(e=+e.toString()),t.push(e)})),n=t.join(" "),n}function findCurrentNum(){let e=/x+-\//g;numArr=e.test(currentInput)?currentInput.split(e):currentInput.split(" "),currentNum=numArr[numArr.length-1]}function findLastKey(){lastKey=currentInput[currentInput.length-1]}keys.forEach((e=>{e.addEventListener("click",(e=>{findLastKey();let t=e.currentTarget.getAttribute("data-value");if(findCurrentNum(),"."!==t||!currentNum.includes(".")&&" "!==!lastKey){if(1==currentNum.length){if("0"===t&&!currentNum.includes(".")&&currentNum.includes("0"))return;"0"===currentNum[0]&&"."!==t&&(currentInput=currentInput.slice(0,currentInput.length-1))}currentInput+=t,input.value=numberWithCommas(currentInput)}}))})),calcs.forEach((e=>{e.addEventListener("click",(e=>{findLastKey();let t=e.currentTarget.getAttribute("data-value");if("-"===t&&"-"!==lastKey){if("."===lastKey)return;if(" "===lastKey||0==currentInput.length)return currentInput+="-",void(input.value=currentInput)}currentInput.length>0&&" "!==lastKey&&"-"!==lastKey&&"."!==lastKey&&(currentInput+="*"===t?" x ":` ${t} `,input.value=numberWithCommas(currentInput),calcNo++)}))})),del.addEventListener("click",(()=>{findLastKey()," "===lastKey?(currentInput=currentInput.slice(0,currentInput.length-3),calcNo--):currentInput.length&&(currentInput=currentInput.slice(0,currentInput.length-1)),input.value=numberWithCommas(currentInput)})),reset.addEventListener("click",(e=>{currentInput="",input.value=currentInput})),equal.addEventListener("click",(()=>{findLastKey(),currentInput.length>0&&calcNo>0&&" "!==lastKey&&(currentInput=xFinder(currentInput),currentInput=removeZero(currentInput),currentInput=eval(currentInput),currentInput=currentInput.toString().includes(".")?+currentInput.toFixed(2):+currentInput,input.value=numberWithCommas(currentInput.toString()),calcNo=0,currentInput=isNaN(currentInput)||!isFinite(currentInput)?"":currentInput.toString())}));
